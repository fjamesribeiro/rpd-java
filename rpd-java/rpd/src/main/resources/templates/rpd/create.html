<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragmentos :: head}" />

<body>
	<!--
	<script>
		function myFunction() {
			var x = document.getElementById("humores");
			if (x.value === "Humor Positivo") {
				console.log(x.text);
			} else {
				console.log(x.text);
			}
		}
	</script>
		<script>
		
		function handleSentimento(humor) {
			$.ajax({
				type: 'GET',
				url: [[@{'/rpd/create?humor='}]] + humor,
				beforeSend: function (xhr) {
					xhr.setRequestHeader(header, token);
				},
				success: function (data) {
					$('#zip').empty();
					var arrayCap = data.toString().split(",");

					for (a in arrayCap) {
						var newOption = new Option(data[a], data[a], false, false);
						$('#zip').append(newOption).trigger('change');
					}
				}
			});
		}

	</script>
	 <script th:inline="javascript">
        var minhaLista = /*[[${listSentimentos}]]*/ [];
              minhaLista.forEach(function(elemento) {
            console.log(elemento);
        });
    </script>-->
	<header th:replace="~{fragmentos :: header}" />

	<div class="container">

		<form method="post" action="/rpd" th:object="${rpd}">

			<input type="hidden" th:field="*{id}" />

			<input type="hidden" th:field="*{paciente.id}" />

			<div class="mb-3">
				<label class="form-label" for="data">Data</label>
				<!--	<input type="date" class="form-control" th:field="*{data}" />-->
				<input type="hidden" name="data" id="data" value="01/01/2020" />
			</div>

			<div class="mb-3" role="group">
				<label for="humores" class="form-label">Como está seu Humor?</label>

				<select class="form-select" id="humores" th:field="*{humor.id}" onchange="myFunction()">
					<option hidden value=""></option>
					<th:block th:each="h : ${listHumores}">
						<option th:text="${h.texto}" th:value="${h.id}" />
					</th:block>
				</select>
			</div>

			<div class="mb-3">
				<label class="form-label" for="pensamento">O que aconteceu?</label>
				<input type="text" class="form-control" th:field="*{situacao}" />
			</div>

			<div class="mb-3">
				<label class="form-label" for="pensamento">Que pensamento você teve?</label>
				<input type="text" class="form-control" th:field="*{pensamento}" />
			</div>

			<div class="mb-3" role="group">
				<label class="form-label">Como você está se sentindo?</label>

				<div class="mb-3" role="group">
					<th:block th:each="sentimento : ${listSentimentos}">
						<div class="form-check form-switch">
							<input class="form-check-input" type="checkbox" th:field="*{sentimentos}"
								th:value="${sentimento.id}"
								th:checked="${rpd.sentimentos != null and rpd.sentimentos.contains(sentimento)}" />
							<label class="form-check-label" th:text="${sentimento.texto}"></label>
						</div>
					</th:block>

					</th:block>
				</div>
			</div>

			<div class="mb-3" role="group">
				<label class="form-label">Que reações corporais você teve?</label>

				<div class="mb-3" role="group">
					<th:block th:each="fisilolgia : ${listFisiologias}">
						<div class="form-check form-switch">
							<input class="form-check-input" type="checkbox" th:field="*{fisiologias}"
								th:value="${fisilolgia.id}"
								th:checked="${rpd.getFisiologias() != null and rpd.getFisiologias().contains(fisilolgia)}" />
							<label class="form-check-label" th:text="${fisilolgia.texto}"></label>
						</div>
					</th:block>
				</div>
			</div>

			<div class="mb-3">
				<label class="form-label" for="pensamento">O que você fez?</label>

				<input type="text" class="form-control" th:field="*{comportamento}" />
			</div>

			<div class="mb-3" role="group">
				<button type="submit" class="btn btn-primary">Submit</button>
			</div>

		</form>
	</div>
</body>

</html>